<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "https://github.com/rbatis/rbatis_sql/raw/main/mybatis-3-mapper.dtd">
<mapper>
    <select id="get_user_menu_List" >
        select t3.*, (select lang.field_value from sys_language lang where lang.table_name='sys_menu' and lang.field_name='name'
        and lang.table_id=t3.id and lang.language=#{language}) as name from sys_role_user t1
        left join sys_role_menu t2 on t1.role_id = t2.role_id
        left join sys_menu t3 on t2.menu_id = t3.id
        where t1.user_id = #{userId} and t3.del_flag = 0
        <if test="type != null">
            and t3.type = #{type}
        </if>
        order by t3.sort asc
    </select>
</mapper>